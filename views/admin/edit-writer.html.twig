{% set namespace = 'Plasticbrain\\FlashMessages\\' %}

{% extends 'layout.html.twig' %}

{% block title %}
Admin | Edit Writer
{% endblock %}

{% block css %}
<link rel="stylesheet" href="../public/css/writer.css">
{% endblock %}

{% block navbar %}
{% include 'admin-navbar.html.twig' %}
{% endblock %}

{% block content %}
<div class="container">

	<div class="row">
		<div class="col-sm-6 col-sm-offset-2">
			{% if flash.hasMessages(constant(namespace~'FlashMessages::SUCCESS')) %}
				{{ flash.display(constant(namespace~'FlashMessages::SUCCESS')) }}
			{% endif %}
			{% if flash.hasErrors() %}
	 			{{ flash.display(constant(namespace~'FlashMessages::ERROR')) }}
	 		{% endif %}
		</div>
	</div>

	<div class="row">

		<div class="col-sm-6 col-sm-offset-2">
		
			<h2>Edit Writer</h2>

			<hr>

			<form id="name" action="" method="POST">

				<label for="nameSelect">Select A Writer: </label>
				<select id="nameSelect" name="writer_id">
						<option value=""></option>
				{% for w in allWriters %}
						<option value="{{ w.id }}">{{ w.name | title }}</option>
				{% endfor %}
				</select>

				<button class="btn btn-primary btn-xs" type="submit">Select</button>

			</form>

			

		</div>
	
	</div>
	
	{% if writer.id %}
	<div class="form-group col-sm-6 col-sm-offset-2">

		<form id="create-writer" class="form-horizontal" method="POST" action="update.php">

			<label class="control-label" for="email">Email: </label><input class="form-control" id="email" type="email" name="email" value="{{ writer.email }}" required="">

			<label class="control-label" for="name">Name: </label><input class="form-control" id="name" type="text" name="name" value="{{ writer.name }}" required>

			<label class="control-label" for="address_1">Address 1: </label><input class="form-control" id="address_1" type="text" name="address_1" value="{{ writer.address_1 }}" required>

			<label class="control-label" for="address_2">Address 2: </label><input class="form-control" id="address_2" type="text" name="address_2" value="{{ writer.address_2 }}">

			<label class="control-label" for="city">City: </label><input class="form-control" id="city" type="text" name="city" value="{{ writer.city }}" required>
		
			<label class="control-label" for="state">State: </label>
			<select id="state" name="state" class="form-control">
				<option value="{{ writer.state }}">{{ writer.state }}</option>
				{% include 'states.html.twig' %}
			</select>

			<label class="control-label postal" for="postal_code">Postal Code: </label><input class="form-control postal" id="postal_code" type="text" name="postal_code" value="{{ writer.postal_code }}" required>

			<label class="control-label" for="phone">Phone: </label><input class="form-control" id="phone" type="text" name="phone" value="{{ writer.phone }}" required>

			<label class="control-label" for="gender">Gender: </label>
			<select name="gender" id="gender" class="form-control">
				<option value="{{ writer.gender }}">{{ writer.gender | title }}</option>
				<option value="male">Male</option>
				<option value="female">Female</option>
			</select>

			<input type="hidden" name="id" value="{{ writer.id }}">

			<button id="submit" type="submit" class="btn btn-primary">Update Writer</button>

		</form>
	
	</div>
	{% endif %}
	
</div> <!-- /container -->
{% endblock %}